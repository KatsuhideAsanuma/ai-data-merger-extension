{
    "name": "ai-data-merger-extension",
    "displayName": "AI Data Merger Extension",
    "description": "ファイルをマージしてAI参照データを生成する拡張機能",
    "version": "0.1.0",
    "engines": {
      "vscode": "^1.60.0"
    },
    "categories": [
      "Other"
    ],
    "activationEvents": [
      "onCommand:extension.addFileToQueue",
      "onCommand:extension.clearQueue",
      "onCommand:extension.generateMergedFile",
      "onCommand:extension.reexecuteMerge",
      "onCommand:extension.changeFileCategory",
      "onCommand:extension.removeFileFromQueue",
      "onCommand:extension.moveFileUp",
      "onCommand:extension.moveFileDown",
      "onCommand:extension.loadProjectMergeList",
      "onCommand:extension.addHistoryToMergeList",
      "onCommand:extension.createPromptTemplate",
      "onCommand:extension.createSimplePrompt",
      "onCommand:extension.generateFromTemplate",
      "onCommand:extension.editPrompt",
      "onCommand:extension.previewPrompt",
      "onCommand:extension.insertSnippet",
      "onCommand:extension.addPromptToQueue",
      "onCommand:extension.insertMergedDataToPrompt",
      "onCommand:extension.exportPrompts",
      "onCommand:extension.importPrompts",
      "onCommand:extension.createPromptFromFile",
      "onCommand:extension.savePromptAsFile",
      "onCommand:extension.backupPromptsLibrary",
      "onCommand:extension.restorePromptsLibrary",
      "onView:promptsTreeView"
    ],
    "main": "./out/extension.js",
    "contributes": {
      "commands": [
        {
          "command": "extension.addFileToQueue",
          "title": "Add File to Merge Queue",
          "icon": "$(add)"
        },
        {
          "command": "extension.clearQueue",
          "title": "Clear Merge Queue",
          "icon": "$(trash)"
        },
        {
          "command": "extension.generateMergedFile",
          "title": "Generate Merged File",
          "icon": "$(merge)"
        },
        {
          "command": "extension.reexecuteMerge",
          "title": "Re-Execute Merge from History",
          "icon": "$(history)"
        },
        {
          "command": "extension.changeFileCategory",
          "title": "Change File Category",
          "icon": "$(symbol-folder)"
        },
        {
          "command": "extension.removeFileFromQueue",
          "title": "Remove File from Queue",
          "icon": "$(trash)"
        },
        {
          "command": "extension.moveFileUp",
          "title": "Move File Up",
          "icon": "$(arrow-up)"
        },
        {
          "command": "extension.moveFileDown",
          "title": "Move File Down",
          "icon": "$(arrow-down)"
        },
        {
          "command": "extension.loadProjectMergeList",
          "title": "Load Project Merge List",
          "icon": "$(notebook)"
        },
        {
          "command": "extension.addHistoryToMergeList",
          "title": "Add to Project Merge Lists",
          "icon": "$(add)"
        },
        {
          "command": "extension.createPromptTemplate",
          "title": "Create Prompt Template",
          "icon": "$(file-add)"
        },
        {
          "command": "extension.createSimplePrompt",
          "title": "Create Simple Text Prompt",
          "icon": "$(new-file)"
        },
        {
          "command": "extension.generateFromTemplate",
          "title": "Generate Text Prompt from Template",
          "icon": "$(debug-step-over)"
        },
        {
          "command": "extension.editPrompt",
          "title": "Edit Prompt",
          "icon": "$(edit)"
        },
        {
          "command": "extension.previewPrompt",
          "title": "Preview Prompt",
          "icon": "$(preview)"
        },
        {
          "command": "extension.insertSnippet",
          "title": "Insert Prompt Snippet",
          "icon": "$(symbol-snippet)"
        },
        {
          "command": "extension.addPromptToQueue",
          "title": "Add Prompt to Merge Queue",
          "icon": "$(add)"
        },
        {
          "command": "extension.insertMergedDataToPrompt",
          "title": "Insert Merged Data to Prompt",
          "icon": "$(insert)"
        },
        {
          "command": "extension.exportPrompts",
          "title": "Export Prompts",
          "icon": "$(export)"
        },
        {
          "command": "extension.importPrompts",
          "title": "Import Prompts",
          "icon": "$(import)"
        },
        {
          "command": "extension.createPromptFromFile",
          "title": "Create Prompt from File",
          "icon": "$(file-add)"
        },
        {
          "command": "extension.savePromptAsFile",
          "title": "Save Prompt as File",
          "icon": "$(save-as)"
        },
        {
          "command": "extension.backupPromptsLibrary",
          "title": "Backup Prompts Library",
          "icon": "$(archive)"
        },
        {
          "command": "extension.restorePromptsLibrary",
          "title": "Restore Prompts Library",
          "icon": "$(unarchive)"
        }
      ],
      "viewsContainers": {
        "activitybar": [
          {
            "id": "aiDataMerger",
            "title": "AI Data Merger",
            "icon": "resources/icon_transparent.png"
          }
        ]
      },
      "views": {
        "aiDataMerger": [
          {
            "id": "selectionTreeView",
            "name": "Selected Files"
          },
          {
            "id": "historyTreeView",
            "name": "Merge History"
          },
          {
            "id": "promptsTreeView",
            "name": "Prompts"
          }
        ]
      },
      "menus": {
        "explorer/context": [
          {
            "command": "extension.addFileToQueue",
            "title": "Add to File Merge Queue",
            "when": "explorerResourceIsFolder || resourceLangId == markdown || resourceLangId == plaintext || resourceLangId == javascript || resourceLangId == typescript || resourceLangId == json || resourceLangId == yaml || resourceLangId == python || resourceLangId == java || resourceLangId == cpp || resourceLangId == c || resourceLangId == csharp || resourceLangId == go || resourceLangId == rust || resourceLangId == ruby || resourceLangId == php || resourceLangId == html || resourceLangId == css || resourceLangId == xml || resourceLangId == bat || resourceLangId == shellscript || resourceLangId == sql || resourceLangId == scala || resourceLangId == kotlin || resourceLangId == swift || resourceLangId == dart || resourceLangId == groovy || resourceLangId == r || resourceLangId == powershell || resourceLangId == perl || resourceLangId == lua || resourceLangId == clojure || resourceLangId == fsharp || resourceLangId == coffeescript || resourceLangId == jsonc || resourceLangId == ignore || resourceLangId == gitignore", 
            "group": "navigation"
          },
          {
            "command": "extension.createPromptFromFile",
            "title": "Create Prompt from File",
            "when": "resourceLangId == markdown || resourceLangId == plaintext",
            "group": "navigation"
          }
        ],
        "view/title": [
          {
            "command": "extension.generateMergedFile",
            "when": "view == selectionTreeView",
            "group": "navigation"
          },
          {
            "command": "extension.clearQueue",
            "when": "view == selectionTreeView",
            "group": "navigation"
          },
          {
            "command": "extension.loadProjectMergeList",
            "when": "view == selectionTreeView",
            "group": "navigation"
          },
          {
            "command": "extension.createPromptTemplate",
            "when": "view == promptsTreeView",
            "group": "navigation"
          },
          {
            "command": "extension.createSimplePrompt",
            "when": "view == promptsTreeView",
            "group": "navigation"
          },
          {
            "command": "extension.importPrompts",
            "when": "view == promptsTreeView",
            "group": "navigation"
          },
          {
            "command": "extension.exportPrompts",
            "when": "view == promptsTreeView",
            "group": "navigation"
          }
        ],
        "view/item/context": [
          {
            "command": "extension.changeFileCategory",
            "when": "view == selectionTreeView && viewItem == file",
            "group": "inline"
          },
          {
            "command": "extension.removeFileFromQueue",
            "when": "view == selectionTreeView && viewItem == file",
            "group": "inline"
          },
          {
            "command": "extension.moveFileUp",
            "when": "view == selectionTreeView && viewItem == file",
            "group": "inline"
          },
          {
            "command": "extension.moveFileDown",
            "when": "view == selectionTreeView && viewItem == file",
            "group": "inline"
          },
          {
            "command": "extension.addHistoryToMergeList",
            "title": "Add to Project Merge Lists",
            "when": "view == historyTreeView && viewItem == historyItem",
            "group": "inline"
          },
          {
            "command": "extension.editPrompt",
            "when": "view == promptsTreeView && (viewItem == promptTemplate || viewItem == promptSimpleText)",
            "group": "inline"
          },
          {
            "command": "extension.generateFromTemplate", 
            "when": "view == promptsTreeView && viewItem == promptTemplate",
            "group": "inline"
          },
          {
            "command": "extension.addPromptToQueue",
            "when": "view == promptsTreeView && viewItem == promptSimpleText",
            "group": "inline"
          }
        ]
      },
      "configuration": {
        "type": "object",
        "title": "AI Data Merger Configuration",
        "properties": {
          "aiDataMerger.outputPath": {
            "type": "string",
            "default": "./merged",
            "description": "マージ後のファイル出力先フォルダ"
          },
          "aiDataMerger.defaultFileName": {
            "type": "string",
            "default": "merged_data.md",
            "description": "マージファイルのデフォルトファイル名"
          },
          "aiDataMerger.allowedFileTypes": {
            "type": "array",
            "default": [
              "markdown",
              "plaintext",
              "json",
              "yaml",
              "javascript",
              "typescript",
              "python",
              "java",
              "cpp",
              "c",
              "csharp",
              "go",
              "rust",
              "ruby",
              "php",
              "html",
              "css",
              "xml",
              "shellscript",
              "bat",
              "sql",
              "scala",
              "kotlin",
              "swift",
              "dart",
              "groovy",
              "r",
              "powershell",
              "perl",
              "lua",
              "clojure",
              "fsharp",
              "coffeescript"
            ],
            "description": "マージキューに追加可能なファイルタイプ（VSCodeの言語識別子）"
          },
          "aiDataMerger.showDataFileContent": {
            "type": "boolean",
            "default": true,
            "description": "JSONやYAMLなどのデータファイルのコード全体を表示するかどうか。falseの場合は構造のみ表示します。"
          },
          "aiDataMerger.categories": {
            "type": "array",
            "default": [
              "プロンプト出力",
              "設計書出力",
              "参照コード出力"
            ],
            "description": "マージファイル内のカテゴリ一覧。ファイルの分類に使用されます。"
          },
          "aiDataMerger.promptsStoragePath": {
            "type": "string",
            "default": "./prompts",
            "description": "プロンプトデータの保存先フォルダ"
          },
          "aiDataMerger.promptCategories": {
            "type": "array",
            "default": [
              "コード生成",
              "説明要求",
              "要約",
              "デバッグ",
              "一般"
            ],
            "description": "プロンプトのカテゴリ一覧"
          },
          "aiDataMerger.maxTokenWarningThreshold": {
            "type": "number",
            "default": 4000,
            "description": "トークン数警告の閾値"
          },
          "aiDataMerger.promptSnippets": {
            "type": "array",
            "default": [
              {
                "name": "コード説明",
                "text": "以下のコードについて説明してください："
              },
              {
                "name": "バグ修正",
                "text": "以下のコードにあるバグを見つけて修正してください："
              },
              {
                "name": "リファクタリング",
                "text": "以下のコードをより効率的にリファクタリングしてください："
              }
            ],
            "description": "プロンプト作成時に挿入可能な定型句"
          }
        }
      }
    },
    "scripts": {
      "vscode:prepublish": "npm run compile",
      "compile": "tsc -p ./",
      "package": "vsce package"
    },
    "publisher": "katsuhide-asanuma",
    "devDependencies": {
      "@types/node": "^14.0.0",
      "@vscode/vsce": "^3.3.2",
      "typescript": "^4.0.0",
      "vscode": "^1.1.37"
    },
    "repository": {
      "type": "git",
      "url": "https://github.com/katsuhideAsanuma/ai-data-merger-extension.git"
    },
    "icon": "resources/icon.png"

  }
  